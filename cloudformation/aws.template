{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Metadata": {
    "AWS::CloudFormation::Designer": {
      "f1310c24-9ec6-437b-81e4-1ed5fb5ddb15": {
        "size": {
          "width": 240,
          "height": 450
        },
        "position": {
          "x": -1040,
          "y": 170
        },
        "z": 1,
        "embeds": [
          "51575057-556d-4fd3-a03a-c02c7b740d68",
          "2cc1e0f0-7dbb-466a-b161-31ea84a64bbf",
          "9f1c7f4d-1502-456d-94e7-092a19578dfd"
        ]
      },
      "a9a2dfa9-169d-477b-b29e-f20cda272753": {
        "size": {
          "width": 150,
          "height": 170
        },
        "position": {
          "x": -750,
          "y": 150
        },
        "z": 1,
        "embeds": [
          "e0ab7093-ff5b-4641-a297-2dcfc4c9100a"
        ]
      },
      "2cc1e0f0-7dbb-466a-b161-31ea84a64bbf": {
        "size": {
          "width": 170,
          "height": 110
        },
        "position": {
          "x": -1010,
          "y": 370
        },
        "z": 2,
        "parent": "f1310c24-9ec6-437b-81e4-1ed5fb5ddb15",
        "embeds": [
          "d4d1573a-6a6c-4e39-bd93-6d6e3de2d1eb"
        ]
      },
      "e0ab7093-ff5b-4641-a297-2dcfc4c9100a": {
        "size": {
          "width": 90.00247041778891,
          "height": 89.09691990764296
        },
        "position": {
          "x": -730,
          "y": 210
        },
        "z": 2,
        "parent": "a9a2dfa9-169d-477b-b29e-f20cda272753",
        "embeds": []
      },
      "17834753-7d34-4da0-8661-eeb7773d2990": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -890,
          "y": 30
        },
        "z": 0,
        "embeds": []
      },
      "fc9726e7-1213-4817-ba56-cb2a5be03217": {
        "source": {
          "id": "17834753-7d34-4da0-8661-eeb7773d2990"
        },
        "target": {
          "id": "f1310c24-9ec6-437b-81e4-1ed5fb5ddb15"
        },
        "z": 0
      },
      "9f1c7f4d-1502-456d-94e7-092a19578dfd": {
        "size": {
          "width": 170,
          "height": 130
        },
        "position": {
          "x": -1010,
          "y": 210
        },
        "z": 2,
        "parent": "f1310c24-9ec6-437b-81e4-1ed5fb5ddb15",
        "embeds": [
          "8998347b-159d-4e95-a4e9-f15988991add"
        ]
      },
      "8998347b-159d-4e95-a4e9-f15988991add": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -960,
          "y": 250
        },
        "z": 3,
        "parent": "9f1c7f4d-1502-456d-94e7-092a19578dfd",
        "embeds": [],
        "references": [
          "17834753-7d34-4da0-8661-eeb7773d2990"
        ]
      },
      "ba61c198-7dba-42c2-ba30-20f6b5d36732": {
        "source": {
          "id": "9f1c7f4d-1502-456d-94e7-092a19578dfd"
        },
        "target": {
          "id": "2cc1e0f0-7dbb-466a-b161-31ea84a64bbf"
        },
        "z": 2
      },
      "51575057-556d-4fd3-a03a-c02c7b740d68": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -1000,
          "y": 500
        },
        "z": 2,
        "parent": "f1310c24-9ec6-437b-81e4-1ed5fb5ddb15",
        "embeds": []
      },
      "d4d1573a-6a6c-4e39-bd93-6d6e3de2d1eb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -955.9105126009051,
          "y": 399.41740160772736
        },
        "z": 3,
        "parent": "2cc1e0f0-7dbb-466a-b161-31ea84a64bbf",
        "embeds": [],
        "ismemberof": [
          "51575057-556d-4fd3-a03a-c02c7b740d68"
        ]
      },
      "7c38067c-1d0b-4fe0-b6ef-daa5e1acf6f5": {
        "source": {
          "id": "d4d1573a-6a6c-4e39-bd93-6d6e3de2d1eb"
        },
        "target": {
          "id": "51575057-556d-4fd3-a03a-c02c7b740d68"
        },
        "z": 4
      },
      "902a22c1-6303-4a05-a945-77b05b8d7b31": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": -1140,
          "y": 400
        },
        "z": 0,
        "embeds": [],
        "isconnectedto": [
          "d4d1573a-6a6c-4e39-bd93-6d6e3de2d1eb"
        ]
      },
      "9fe9ca2c-fdb3-4ca9-b0d3-69730c4bd7bf": {
        "source": {
          "id": "8998347b-159d-4e95-a4e9-f15988991add"
        },
        "target": {
          "id": "17834753-7d34-4da0-8661-eeb7773d2990"
        },
        "z": 4
      },
      "a13eb7bc-4ff3-406c-9986-4c7ef490c543": {
        "source": {
          "id": "8998347b-159d-4e95-a4e9-f15988991add"
        },
        "target": {
          "id": "17834753-7d34-4da0-8661-eeb7773d2990"
        },
        "z": 4
      },
      "6375b89a-9ec9-40a4-aacb-15f178f83f63": {
        "source": {
          "id": "902a22c1-6303-4a05-a945-77b05b8d7b31"
        },
        "target": {
          "id": "d4d1573a-6a6c-4e39-bd93-6d6e3de2d1eb"
        },
        "z": 4
      }
    }
  },
  "Resources": {
    "NorthEast1aGatewayAttachment": {
      "Type": "AWS::EC2::VPCGatewayAttachment",
      "Properties": {
        "InternetGatewayId": {
          "Ref": "NorthEast1aGW"
        },
        "VpcId": {
          "Ref": "NE1a"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fc9726e7-1213-4817-ba56-cb2a5be03217"
        }
      }
    },
    "NE1a": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": {
          "Ref": "NE1aCidrBlock"
        },
        "EnableDnsSupport": "true",
        "EnableDnsHostnames": "true"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f1310c24-9ec6-437b-81e4-1ed5fb5ddb15"
        }
      }
    },
    "NE1c": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": {
            "Ref": "NE1cCidrBlock"
        },
        "EnableDnsSupport": "true",
        "EnableDnsHostnames": "true"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a9a2dfa9-169d-477b-b29e-f20cda272753"
        }
      }
    },
    "NE1aRouteTable": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "NE1a"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9f1c7f4d-1502-456d-94e7-092a19578dfd"
        }
      }
    },
    "NE1aPublic": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": {
          "Ref": "NE1aPublicCidrBlock"
        },
        "VpcId": {
          "Ref": "NE1a"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "2cc1e0f0-7dbb-466a-b161-31ea84a64bbf"
        }
      }
    },
    "NE1cPublic": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": {
          "Ref": "NE1cPublicCidrBlock"
        },
        "VpcId": {
          "Ref": "NE1c"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "e0ab7093-ff5b-4641-a297-2dcfc4c9100a"
        }
      }
    },
    "NE1aRoute": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "NE1aRouteTable"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "NorthEast1aGW"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "8998347b-159d-4e95-a4e9-f15988991add"
        }
      }
    },
    "NE1aSecurityGroup": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "VpcId": {
          "Ref": "NE1a"
        },
        "GroupDescription": "Allow SSH",
        "SecurityGroupIngress": {
          "IpProtocol": "tcp",
          "FromPort": "22",
          "ToPort": "22",
          "CidrIp": "0.0.0.0/0"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "51575057-556d-4fd3-a03a-c02c7b740d68"
        }
      }
    },
    "NE1aBastion": {
      "Type": "AWS::EC2::Instance",
      "Properties": {
        "InstanceType": "t2.nano",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SubnetId": {
          "Ref": "NE1aPublic"
        },
        "ImageId": "ami-a21529cc",
        "SecurityGroupIds": [
          {
            "Ref": "NE1aSecurityGroup"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "d4d1573a-6a6c-4e39-bd93-6d6e3de2d1eb"
        }
      }
    },
    "NE1aBastionEIP": {
      "Type": "AWS::EC2::EIP",
      "Properties": {
        "InstanceId": {
          "Ref": "NE1aBastion"
        },
        "Domain": "vpc"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "902a22c1-6303-4a05-a945-77b05b8d7b31"
        }
      }
    },
    "NE1aSubnetRouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "NE1aRouteTable"
        },
        "SubnetId": {
          "Ref": "NE1aPublic"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "ba61c198-7dba-42c2-ba30-20f6b5d36732"
        }
      }
    },
    "NorthEast1aGW": {
      "Type": "AWS::EC2::InternetGateway",
      "Properties": {},
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "17834753-7d34-4da0-8661-eeb7773d2990"
        }
      }
    }
  },
  "Parameters": {
    "KeyName": {
      "Description": "EC2 KeyPair",
      "Type": "AWS::EC2::KeyPair::KeyName"
    },
    "NE1aCidrBlock": {
      "Description": "NE1a Network CidrBlock",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "10.1.0.0/16",
      "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    },
    "NE1aPublicCidrBlock": {
      "Description": "NE1a Public Network CidrBlock",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "10.1.1.0/24",
      "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    },
    "NE1cCidrBlock": {
      "Description": "NE1c Network CidrBlock",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "10.2.0.0/16",
      "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    },
    "NE1cPublicCidrBlock": {
      "Description": "NE1c Public Network CidrBlock",
      "Type": "String",
      "MinLength": "9",
      "MaxLength": "18",
      "Default": "10.2.1.0/24",
      "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
      "ConstraintDescription": "must be a valid IP CIDR range of the form x.x.x.x/x."
    }
  }
}
